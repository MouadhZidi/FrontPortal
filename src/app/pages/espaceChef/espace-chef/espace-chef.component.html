<div class="container-fluid">


  <div class="row">
    <ng-template #content role="document" let-modal>
      <div class="modal-header">
        <h5 class="modal-title mt-0">{{ 'Mise à jour demande' | translate }}</h5>

        <div class="col-sm-3">
          <div>
            <button
              type="button"
              style="float: right"
              class="btn btn-primary w-sm"
              (click)="printerReportt()"
            >
              <i class="mdi mdi-download d-block font-size-9"></i>
            </button>
          </div>
        </div>
        <button
          type="button"
          class="btn-close"
          aria-hidden="true"
          (click)="modal.dismiss('Cross click')"
        ></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="userForm">
          <div class="row">
            <div class="col-12">
              <div class="mb-3">
                <label class="control-label"> {{ 'Date demande' | translate }}</label>
                <input
                  class="form-control"
                 
                  [placeholder]="'Date demande' | translate"
                  type="text"
                  name="name"
                  formControlName="dateDemande"
                  readonly
                />
              </div>

              <div class="mb-3" *ngIf="lib == 'Autorisations'">
                <label class="control-label">{{ 'Heure sortie' | translate }}</label>
                <input
                  class="form-control"
                  
                  [placeholder]="'Heure sortie' | translate"

                  type="text"
                  name="designation"
                  formControlName="heurS"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Autorisations'">
                <label class="control-label">{{ 'Heure retour' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Heure retour' | translate"
                  type="text"
                  name="email"
                  formControlName="heurR"
                  readonly
                />
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div
                    class="mb-3"
                    *ngIf="lib == 'Formation' || lib == 'Congés'"
                  >
                    <label class="control-label"> {{ 'Date début' | translate }}</label>
                    <input
                      class="form-control"
                      [placeholder]="'Date début' | translate"
                      type="text"
                      name="email"
                      formControlName="datDebut"
                      readonly
                    />
                  </div>
                </div>

                <div class="col-md-6">
                  <div
                    class="mb-3"
                    *ngIf="lib == 'Formation' || lib == 'Congés'"
                  >
                    <label class="control-label">{{ 'Date fin' | translate }}</label>
                    <input
                      class="form-control"
                      [placeholder]="'Date fin' | translate"
                      type="text"
                      name="email"
                      formControlName="datFin"
                      readonly
                    />
                  </div>
                </div>
              </div>

              <div class="mb-3" *ngIf="lib == 'Situation Administrtive'">
                <label class="control-label">{{ 'Numéro attestation' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Numéro attestation' | translate"
                  type="text"
                  name="email"
                  formControlName="numAttest"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Formation'">
                <label class="control-label">{{ 'Année' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Année' | translate"
                  type="text"
                  name="email"
                  formControlName="annee"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Formation'">
                <label class="control-label">{{ 'Titre' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Titre' | translate"
                  type="text"
                  name="email"
                  formControlName="titre"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Formation'">
                <label class="control-label">{{ 'Type formation' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Type formation' | translate"
                  type="text"
                  name="email"
                  formControlName="type_formation"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Formation'">
                <label class="control-label">{{ 'Théme' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Théme' | translate"

                  type="text"
                  name="email"
                  formControlName="theme"
                  readonly
                />
              </div>

              <div class="mb-3" *ngIf="lib == 'Prets et avances'">
                <label class="control-label">{{ 'Libélle prêt' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Libélle prêt' | translate"

                  type="text"
                  name="email"
                  formControlName="lib_pret"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Prets et avances'">
                <label class="control-label">{{ 'Montant demandé' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Montant demandé' | translate"

                  type="text"
                  name="email"
                  formControlName="mntDem"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Autorisations'">
                <label class="control-label">{{ 'Libélle autorisation' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Libélle autorisation' | translate"

                  type="text"
                  name="email"
                  formControlName="lib_autorisation"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Congés'">
                <label class="control-label">{{ 'Motif' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Motif' | translate"

                  type="text"
                  name="email"
                  formControlName="motif"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Autorisations'">
                <label class="control-label">{{ 'Minute retour' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Minute retour' | translate"

                  type="text"
                  name="email"
                  formControlName="minR"
                  readonly
                />
              </div>
              <div class="mb-3" *ngIf="lib == 'Autorisations'">
                <label class="control-label">{{ 'Minute sortie' | translate }}</label>
                <input
                  class="form-control"
                      [placeholder]="'Minute sortie' | translate"
                  type="text"
                  name="email"
                  formControlName="minS"
                  readonly
                />
              </div>

         

              <div class="mb-3">
                <label class="control-label">{{ 'Texte demande' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Texte demande' | translate"

                  type="text"
                  name="email"
                  formControlName="txtDem"
                  readonly
                />
              </div>

              <div class="mb-3" *ngIf="lib == 'Prets et avances'">
                <label class="control-label">{{ 'Type prêt' | translate }}</label>
                <input
                  class="form-control"
                  [placeholder]="'Type prêt' | translate"

                  type="text"
                  name="email"
                  formControlName="typPret"
                  readonly
                />
              </div>

              <div class="mb-3">
                <label class="control-label">{{ 'Réponse Chef' | translate }}</label>

                <select
                  class="form-select"
                  aria-label="Default select example"
                  formControlName="reponseChef"
                >
                  <option value="O">{{ 'Oui' | translate }}</option>
                  <option value="N">{{ 'Non' | translate }}</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="control-label">{{ 'Observation Chef' | translate }}</label>
                <textarea
                  class="form-control"
                  [placeholder]="'Entrer votre obsérvation' | translate"

                  type="text"
                  name="email"
                  formControlName="txtChef"
                ></textarea>
              </div>
            </div>
          </div>
          <button
            type="submit"
            class="btn btn-success"
            id="btn-save-event"
            (click)="updateDemande()"
          >
            {{ 'Enregistrer' | translate }}
          </button>
        </form>
      </div>
    </ng-template>

    <div class="card-body p-4">
      <div class="search-box">
        <p class="text-muted">{{ 'Rechercher' | translate }}</p>
        <div class="position-relative">
          <input
            type="text"
            class="form-control rounded bg-light border-light"
            [placeholder]="'Rechercher' | translate"

            [(ngModel)]="term"
          />
          <i class="mdi mdi-magnify search-icon"></i>
        </div>
      </div>
    </div>

    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <ul
            ngbNav
            #customNav="ngbNav"
            [activeId]="1"
            class="nav-tabs nav-tabs-custom nav-justified"
          >
            <li [ngbNavItem]="1">
              <a ngbNavLink>
                <span class="d-block d-sm-none"
                  ><i class="fas fa-home"></i
                ></span>
                <span class="d-none d-sm-block"
                  >{{ 'Liste des demandes d\'autorisations' | translate }}</span
                >
              </a>
              <ng-template ngbNavContent>
                <div class="card-item">
                  <div
                    
                    *ngFor="
                      let data of listDemande
                        | filter : term
                        | paginate : { itemsPerPage: 8, currentPage: p };
                      let i = index
                    "
                  >
                    <div style="margin-left: 10%;"
                      class="card text-center"
                      *ngIf="data.lib_demande == 'Autorisations'"
                    >
                      <div class="card-body">
                        <h5 class="font-size-15 mb-0">
                          <a href="javascript: void(0);" class="text-dark">{{
                            data.npren_pers
                          }}</a>
                        </h5>
                        <p class="text-muted">{{ data.lib_demande }}</p>
                      </div>
                      <div class="card-footer bg-transparent border-top">
                        <div class="contact-links d-flex font-size-20">
                          <div class="flex-fill">
                            <a
                              href="javascript: void(0);"
                              ngbTooltip="Visualiser demande"
                              (click)="openModal(content, data)"
                              ><i class="bx bx-user-circle"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <div class="text-center my-3">
                      <pagination-controls
                        (pageChange)="p = $event"
                      ></pagination-controls>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="2">
              <a ngbNavLink>
                <span class="d-block d-sm-none"
                  ><i class="far fa-user"></i
                ></span>
                <span class="d-none d-sm-block"
                  >{{ 'Liste des demandes des congés' | translate }}</span
                >
              </a>
              <ng-template ngbNavContent>
                <div class="card-item">
                  <div
                   
                    *ngFor="
                      let data of listDemande
                        | filter : term
                        | paginate : { itemsPerPage: 8, currentPage: p };
                      let i = index
                    "
                  >
                    <div style="margin-left: 10%;"
                      class="card text-center"
                      *ngIf="data.lib_demande == 'Congés'"
                    >
                      <div class="card-body">
                        <h5 class="font-size-15 mb-0">
                          <a href="javascript: void(0);" class="text-dark">{{
                            data.npren_pers
                          }}</a>
                        </h5>
                        <p class="text-muted">{{ data.lib_demande }}</p>
                      </div>
                      <div class="card-footer bg-transparent border-top">
                        <div class="contact-links d-flex font-size-20">
                          <div class="flex-fill">
                            <a
                              href="javascript: void(0);"
                              ngbTooltip="Visualiser demande"
                              (click)="openModal(content, data)"
                              ><i class="bx bx-user-circle"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <div class="text-center my-3">
                      <pagination-controls
                        (pageChange)="p = $event"
                      ></pagination-controls>
                    </div>
                  </div>
                
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <a ngbNavLink>
                <span class="d-block d-sm-none"
                  ><i class="far fa-user"></i
                ></span>
                <span class="d-none d-sm-block"
                  >{{ 'Liste des demandes des formations' | translate }}</span
                >
              </a>
              <ng-template ngbNavContent>
                <div class="card-item">
                  <div
                   
                    *ngFor="
                      let data of listDemande
                        | filter : term
                        | paginate : { itemsPerPage: 8, currentPage: p };
                      let i = index
                    "
                  >
                    <div style="margin-left: 10%;"
                      class="card text-center"
                      *ngIf="data.lib_demande == 'Formation'"
                    >
                      <div class="card-body">
                        <h5 class="font-size-15 mb-0">
                          <a href="javascript: void(0);" class="text-dark">{{
                            data.npren_pers
                          }}</a>
                        </h5>
                        <p class="text-muted">{{ data.lib_demande }}</p>
                      </div>
                      <div class="card-footer bg-transparent border-top">
                        <div class="contact-links d-flex font-size-20">
                          <div class="flex-fill">
                            <a
                              href="javascript: void(0);"
                              ngbTooltip="Visualiser demande"
                              (click)="openModal(content, data)"
                              ><i class="bx bx-user-circle"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <div class="text-center my-3">
                      <pagination-controls
                        (pageChange)="p = $event"
                      ></pagination-controls>
                    </div>
                  </div>
                
                </div>
              </ng-template>
            </li>
          </ul>
          <div [ngbNavOutlet]="customNav"></div>
        </div>
      </div>
    </div>
  </div>

</div>
